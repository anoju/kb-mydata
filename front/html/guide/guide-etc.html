<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover" />
<title>교보증권 마이데이타</title>
<link href="../../static/css/front.min.css" rel="stylesheet" />
<script type="text/javascript" src="../../static/js/ui-plugins.min.js"></script>
<script type="text/javascript" src="../../static/js/ui-front.js"></script>
</head>
<body>
<article id="wrap">
	<div data-include-html="../../include/header.html" data-title="가이드"></div>
	<div data-include-html="../../include/gnb.html"></div>

	<!-- 컨테이너 -->
	<main id="container">
		<!-- 컨텐츠 -->
		<section id="contents">
			<div class="tab-navi-menu">
				<div class="tab-inner">
					<i class="tab-line" aria-hidden="true"></i>
					<ul class="tab-list">
						<li class="tab"><a href="guide-dev.html"><span>개발자참고</span></a></li>
						<li class="tab"><a href="guide-txt.html"><span>텍스트</span></a></li>
						<li class="tab"><a href="guide-btn.html"><span>버튼</span></a></li>
						<li class="tab"><a href="guide-form.html"><span>폼요소</span></a></li>
						<li class="tab"><a href="guide-form2.html"><span>입력 UI</span></a></li>
						<li class="tab"><a href="guide-list.html"><span>리스트</span></a></li>
						<li class="tab"><a href="guide-table.html"><span>테이블</span></a></li>
						<li class="tab"><a href="guide-popup.html"><span>팝업</span></a></li>
						<li class="tab"><a href="guide-address.html"><span>주소검색</span></a></li>
						<li class="tab"><a href="guide-animate.html"><span>애니메이션</span></a></li>
						<li class="tab active"><a href="guide-etc.html"><span>기타</span></a></li>
					</ul>
				</div>
			</div>
			<div class="section pt-30">
				<h2 class="gd__h1">ui-circle-rotate</h2>
				<div style="overflow: hidden;">
					<div class="ui-circle-rotate mg-40">
						<div class="rotate-items">
							<div class="rotate-item"><div class="img-box"><img src="../../static/images/temp/thumb-temp.jpg" alt=""></div></div>
							<div class="rotate-item"><div class="img-box"><img src="../../static/images/temp/thumb-temp.jpg" alt=""></div></div>
							<div class="rotate-item"><div class="img-box"><img src="../../static/images/temp/thumb-temp.jpg" alt=""></div></div>
							<div class="rotate-item"><div class="img-box"><img src="../../static/images/temp/thumb-temp.jpg" alt=""></div></div>
							<div class="rotate-item"><div class="img-box"><img src="../../static/images/temp/thumb-temp.jpg" alt=""></div></div>
						</div>
					</div>
				</div>
				<h2 class="gd__h1">character-face</h2>
				<div class="character-face-wrap">
					<div class="input"><input type="text" name="" placeholder="이름 입력"></div>
					<div class="input"><input type="password" name="" placeholder="주민번호 입력"></div>
					<br>
					<div class="character-face">
						<div class="body"></div>
						<div class="face">
							<div class="ears">
								<div></div>
								<div></div>
							</div>
							<div class="face-line">
								<div class="face-in">
									<div class="eyes">
										<div class="eye left"></div>
										<div class="eye right"></div>
									</div>
									<div class="mouse">
									</div>
								</div>
							</div>
						</div>
					</div>
					<br>
					<div class="input"><input type="text" name="" placeholder="아이디 입력"></div>
					<div class="input"><input type="password" name="" placeholder="비밀번호 입력"></div>
					<div class="character-hidden"></div>
				</div>
				<h2 class="gd__h1">ui-tap-area</h2>
				<div>
					<div class="gd__tap_box star ui-tap-area">
						해당 영역을 탭 해주세요
					</div>
					<br>
					<div class="gd__tap_box heart ui-tap-area">
						해당 영역을 탭 해주세요
					</div>
				</div>
				<h1 class="gd__h1">bottom swipe</h1>
				<div>
					<h2 class="gd__h2">select</h2>
					<div>
						<div class="select">
							<select id="inpSel1" title="날짜 선택">
								<option value="">기본 select</option>
								<option value="1">1일</option>
								<option value="2">2일</option>
								<option value="3">3일</option>
							</select>
						</div>

						<div class="select">
							<select title="날짜 선택" class="is-swipe">
								<option value="">is-swipe</option>
								<option value="1">1일</option>
								<option value="2">2일</option>
								<option value="3">3일</option>
							</select>
						</div>

						<div class="select">
							<select title="날짜 선택" class="is-swipe-move">
								<option value="">is-swipe-move</option>
								<option value="1">1일</option>
								<option value="2">2일</option>
								<option value="3">3일</option>
							</select>
						</div>
					</div>
					<h2 class="gd__h2">popup</h2>
					<div>
						<div class="btn-wrap">
							<div class="flex">
								<button class="button line" onclick="Layer.open('#bottomDialog1')">is-swipe</button>
								<button class="button line" onclick="Layer.open('#bottomDialog2')">is-swipe-move</button>
							</div>
						</div>
					</div>
				</div>
				<h1 class="gd__h1">scss 샘플</h1>
				<div style="position:relative;overflow:hidden;">
					<div class="gd__box"></div>
					<div class="gd__box-2"></div>
					<section class="gd__box-2"></section>
					<div class="gd__wrap2">
						<div class="gd__box-2"></div>
					</div>
				</div>
				<h1 class="gd__h1">역(하단시작) 스크롤 테스트</h1>
				<div class="gd__scroll-area reverse-scroll-wrap">
					<div class="reverse-scroll-inside">
						<p>1번메세지 1번메세지</p>
						<p>2번메세지 2번메세지</p>
						<p>3번메세지 3번메세지</p>
						<p>4번메세지 4번메세지</p>
						<p>5번메세지 5번메세지</p>
						<p>6번메세지 6번메세지</p>
						<p>7번메세지 7번메세지</p>
						<p>8번메세지 8번메세지</p>
						<p>9번메세지 9번메세지</p>
						<p>10번메세지 10번메세지</p>
						<p>11번메세지 11번메세지</p>
						<p>12번메세지 12번메세지</p>
						<p>13번메세지 13번메세지</p>
						<p>14번메세지 14번메세지</p>
					</div>
				</div>
			</div>
		</section>
		<!-- //컨텐츠 -->

		<!-- 팝업 -->
		<div id="bottomDialog1" class="popup bottom is-swipe" role="dialog" aria-hidden="true">
			<article class="pop-wrap">
				<div class="pop-head">
					<div>
						<h1>하단팝업제목</h1>
						<a href="#" class="pop-close ui-pop-close" role="button" aria-label="팝업창 닫기"></a>
					</div>
				</div>
				<div class="pop-body">
					<div class="section">
						텍스트 <br>
						텍스트 <br>
						텍스트 <br>
						텍스트 <br>
					</div>
				</div>
			</article>
		</div>

		<div id="bottomDialog2" class="popup bottom is-swipe touch-move" role="dialog" aria-hidden="true">
			<article class="pop-wrap">
				<div class="pop-head">
					<div>
						<h1>하단팝업제목</h1>
						<a href="#" class="pop-close ui-pop-close" role="button" aria-label="팝업창 닫기"></a>
					</div>
				</div>
				<div class="pop-body">
					<div class="section">
						텍스트 <br>
						텍스트 <br>
						텍스트 <br>
						텍스트 <br>
					</div>
				</div>
			</article>
		</div>
		<!-- //팝업 -->
	</main>
	<!-- 컨테이너 -->

	<div data-include-html="../../include/footer.html"></div>
</article>
<script>
document.addEventListener('DOMContentLoaded', function() {
  _character();
});
const _character = function(){
	let $timer;
	const $character = document.querySelector('.character-face');
	if($character === null) return;
	const $characterHidden = document.querySelector('.character-hidden');
	const _rotate3d = function(x, y, z, rad) {
		const face = $character.querySelectorAll('.ears, .eyes, .mouse');
		const value = `rotate3d(${x}, ${y}, ${z}, ${rad}rad)`;
		face.forEach(function(el) {
			el.style.transform = value;
		});
	}
	const _reset = function() {
		clearTimeout($timer);
		$character.classList.remove('playing');
		$timer = setTimeout(function() {
			$character.classList.remove('look-away', 'down', 'up');
			_rotate3d(0, 0, 0, 0);
		}, 1);
	}
	const _characterLook = function(event) {
		const el = event.target;
		const text = el.value.substr(0, el.selectionStart);
		$characterHidden.innerHTML = '<span>'+text + '.</span>';

		const characterRect = $character.getBoundingClientRect();
		const inputRect = el.getBoundingClientRect();
		const caretRect = $characterHidden.getBoundingClientRect();
		const caretPos = caretRect.left + Math.min(caretRect.width, inputRect.width) * !!text;
		const distCaret = characterRect.left + characterRect.width / 2 - inputRect.left - caretPos;
		const distInput = characterRect.top + characterRect.height / 2 - inputRect.top;
		const y = Math.atan2(-distCaret, Math.abs(distInput) * 3);
		const x = Math.atan2(distInput, (Math.abs(distInput) * 3) / Math.cos(y));
		const angle = Math.max(Math.abs(x), Math.abs(y));
		_rotate3d(x / angle, y / angle, y / angle / 2, angle);
	};
  const _characterLookAway= function(event) {
		const el = event.target;
		const characterRect = $character.getBoundingClientRect();
		const inputRect = el.getBoundingClientRect();
		const distInput = characterRect.top + characterRect.height / 2 - inputRect.top;

		$character.classList.add('look-away', distInput < 0 ? 'up' : 'down');
	
		$timer = setTimeout(function() {
			$character.classList.add('playing');
		}, 300);
	};
	
	const _inpEvt = function(e){
		const el = event.target;
		setTimeout(function() {
			if(el.type === 'password'){
				_characterLookAway(e);
			}else{
				_characterLook(e);
			}
		} ,2);
	}

	// init
	const $input = document.querySelectorAll('.input input');
	for (let i = 0; i < $input.length; i++) {
		const $inp = $input[i];
		$inp.addEventListener('focusin', _inpEvt, false);
		$inp.addEventListener('click', _inpEvt, false);
		$inp.addEventListener('keyup', _inpEvt, false);
		$inp.addEventListener('keypress', _inpEvt, false);
		$inp.addEventListener('focusout', _reset, false);
	}
};

const _uiRotate = {
	wrap : '.ui-circle-rotate .rotate-items',
	items: function(){
		const $wrap = $(_uiRotate.wrap);
		const $items = $wrap.find('.rotate-item');
		const $radius = $wrap.outerWidth() /2;
		const $total = $items.length
		const $theta = [];
		const $rotate = 360;
		const $frags = $rotate / $total;
		for(let i = 0; i < $total;i++){
			$theta.push(($frags / 180) * i * Math.PI)
		}
		const $wrapH = $wrap.height();
		$items.each(function(j){
			const $this = $(this);
			const $thisW = $this.outerWidth();
			const $thisH = $this.outerHeight();
			const $posX = Math.round($radius * Math.sin($theta[j]));
			const $posY = Math.round($radius * Math.cos($theta[j]));
			const $left = $wrapH / 2 + $posX - $thisW /2;
			const $top = $wrapH / 2 - $posY - $thisH /2;
			$(this).css({
				'left': $left,
				'top': $top,
			});
		});
	},
	swipe: function(element){
		let ang = 0; // All angles are expressed in radians
		let angStart = 0;
		let isStart = false;

		const _angXY = (ev) => {
			const bcr = element.getBoundingClientRect();
			const radius = bcr.width / 2;
			const clientX = ev.touches ? ev.touches[0].clientX : ev.clientX;
			const clientY = ev.touches ? ev.touches[0].clientY : ev.clientY;
			const y = clientY - bcr.top - radius;  // y from center
			const x = clientX - bcr.left - radius; // x from center
			return Math.atan2(y, x);
		};

		const mousedown = (ev) => {
			isStart = true;
			angStart = _angXY(ev) - ang;
		};

		const mousemove = (ev) => {
			if (!isStart) return;
			if(ev.touches === undefined)ev.preventDefault();
			ang = _angXY(ev) - angStart;
			element.style.transform = 'rotateZ('+ang+'rad)';
			const $items = element.querySelectorAll('.rotate-item');
			$items.forEach(function(item){
				item.style.transform = 'rotateZ(-'+ang+'rad)';
			});
		};

		const mouseup = () => {
			isStart = false; 
		};

		element.addEventListener('mousedown', mousedown, false);
		document.addEventListener('mousemove', mousemove, false);
		document.addEventListener('mouseup', mouseup, false);
		element.addEventListener('touchstart', mousedown, false);
		document.addEventListener('touchmove', mousemove, false);
		document.addEventListener('touchend', mouseup, false);
	},
	init: function(){
		_uiRotate.items();
		document.querySelectorAll(_uiRotate.wrap).forEach(_uiRotate.swipe);
		$(window).resize(_uiRotate.items);
	}
}
_uiRotate.init();
</script>
</body>
</html>